# Implementation Plan for TV Assassin

## Technology Stack Setup
1. ✅ Set up Flutter 3.19 development environment with Android SDK (Size: Medium)
2. ✅ Initialize new Flutter project with Dart null safety enabled (Size: Small)
3. ✅ Configure Android build target to API 26 minimum (Size: Small)
4. ✅ Add required dependencies to pubspec.yaml (Provider, SharedPreferences) (Size: Small)
5. ✅ Set up static analysis with dart analysis options file (Size: Small)

## Environment Configuration
6. ✅ Configure AndroidManifest.xml with IR hardware permission (Size: Small)
7. ✅ Set up ProGuard/R8 rules for code shrinking and obfuscation (Size: Medium)
8. ✅ Configure build flavors for dev/prod environments (Size: Medium)
9. ✅ Set up F-Droid compliant build pipeline in GitHub Actions (Size: Large)

## Core Component Implementation
10. ✅ Implement AndroidIRService wrapper for ConsumerIrManager (Size: Medium)
11. ✅ Create CommandRepository with hardcoded IR codes (Size: Large)
    1. ✅ Add brand code mappings for all 15+ brands
    2. ✅ Implement getAllShutdownCodes() method
12. ✅ Implement ThemeManager with ChangeNotifier (Size: Medium)
    1. ✅ Add theme mode persistence via SharedPreferences
    2. ✅ Create theme switching logic
13. ✅ Create MainViewModel with transmission state management (Size: Large)
    1. ✅ Implement IR hardware availability check
    2. ✅ Add transmission state handling
    3. ✅ Implement error handling for IR operations

## User Interface Implementation
14. ✅ Create main screen widget tree structure (Size: Medium)
    1. ✅ Implement scaffold with app bar
    2. ✅ Create skull button with proper dimensions
15. ✅ Implement button press animation (5% scale down) (Size: Small)
16. ✅ Add haptic feedback on transmission completion (Size: Small)
17. ✅ Create theme toggle widget in app bar (Size: Small)
18. ✅ Implement accessibility features (semantics labels) (Size: Small)

## Integration Tasks
19. ✅ Connect MainViewModel to IRService implementation (Size: Small)
20. ✅ Hook up ThemeManager to UI components (Size: Small)
21. [ ] Set up error display system (SnackBar) (Size: Small)
22. [ ] Implement automatic IR hardware re-check (5s interval) (Size: Medium)

## Security Implementation
23. [ ] Verify all strings are properly obfuscated in release builds (Size: Small)
24. [ ] Ensure no unnecessary permissions are included (Size: Small)
25. [ ] Implement release mode checks for debug flags (Size: Small)

## Testing Implementation
26. ✅ Create unit tests for CommandRepository (Size: Medium)
    1. ✅ Test brand code count validation
    2. [ ] Test code format verification
27. [ ] Implement IRService test mocks (Size: Medium)
28. ✅ Write ThemeManager persistence tests (Size: Small)
29. ✅ Create widget tests for main screen components (Size: Medium)
30. [ ] Develop integration test for happy path scenario (Size: Large)

## Performance Optimization
31. [ ] Implement const widgets where possible (Size: Small)
32. [ ] Verify tree shaking of unused assets (Size: Small)
33. [ ] Optimize IR transmission sequence timing (Size: Medium)
34. [ ] Test memory usage during transmission operations (Size: Medium)

## Deployment Preparation
35. [ ] Configure version numbering scheme (semantic versioning) (Size: Small)
36. [ ] Create F-Droid metadata files (Size: Medium)
37. [ ] Set up reproducible build verification process (Size: Large)
38. [ ] Prepare APK signing configuration (Size: Small)

## Documentation
39. [ ] Document IR code format specifications (Size: Small)
40. [ ] Create developer guide for adding new brands (Size: Medium)
41. [ ] Document theme customization process (Size: Small)

## Post-MVP Features
42. [ ] Design brand submission portal architecture (Future Phase)
43. [ ] Plan Wear OS companion app (Future Phase)
44. [ ] Design selective brand targeting UI (Future Phase)

Each task has been sized based on expected effort:
- Small: <2 hours
- Medium: 2-6 hours
- Large: 6+ hours

The plan follows the MVVM/Clean Architecture patterns specified in the design document and maintains all F-Droid compliance requirements. Tasks are organized to progress from core infrastructure to UI implementation, with testing and optimization integrated throughout. To properly verify the dart code after each relevant step run `dart format . && dart fix --apply` to automatically conform to style guidelines. Then run `flutter analyze` and `flutter test`.
